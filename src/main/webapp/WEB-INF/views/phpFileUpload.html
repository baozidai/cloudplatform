<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content="Xenon Boostrap Admin Panel"/>
    <meta name="author" content=""/>

    <title>容器云平台</title>
    <link rel="shortcut icon" href="assets/images/favicon.png">
    <link rel="stylesheet" href="assets/css/fonts/linecons/css/linecons.css">
    <link rel="stylesheet" href="assets/css/fonts/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap.css">
    <link rel="stylesheet" href="assets/css/xenon-core.css">
    <link rel="stylesheet" href="assets/css/xenon-forms.css">
    <link rel="stylesheet" href="assets/css/xenon-components.css">
    <link rel="stylesheet" href="assets/css/xenon-skins.css">
    <link rel="stylesheet" href="assets/css/custom.css">

    <script src="assets/js/jquery-1.11.1.min.js"></script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="assets/js/html5shiv.min.js"></script>
    <script src="assets/js/respond.min.js"></script>
    <![endif]-->


</head>
<body class="page-body" style="overflow-x: hidden">
<div class="settings-pane">
    <a href="#" data-toggle="settings-pane" data-animate="true">
        &times;
    </a>
</div>
<div class="page-container">
    <div class="sidebar-menu toggle-others fixed">

        <div class="sidebar-menu-inner">

            <header class="logo-env">

                <!-- logo -->
                <div class="logo">
                    <a href="/pods/tomcat" class="logo-expanded">
                        <i class="fa fa-cloud" style="color: #fff;font-size: 20px;"></i>
                        <img src="assets/images/logo1.png" alt="" style="width: 180px;height: 30px;margin-top: -10px"/>
                    </a>

                    <a href="/pods/tomcat" class="logo-collapsed">
                        <i class="fa fa-cloud" style="color: #fff;font-size: 20px;;margin-top:10px"></i>

                    </a>
                </div>

                <!-- This will toggle the mobile menu and will be visible only on mobile devices -->
                <div class="mobile-menu-toggle visible-xs">
                    <a href="#" data-toggle="user-info-menu">
                        <i class="fa fa-user"></i>
                    </a>

                    <a href="#" data-toggle="mobile-menu">
                        <i class="fa-bars"></i>
                    </a>
                </div>
            </header>


            <ul id="main-menu" class="main-menu">
                <li>
                    <a href="/pods/tomcat">
                        <i class="linecons-database" style="font-size: 16px"></i>
                        <span class="title">静态网页及Java Web项目</span>
                    </a>
                </li>
                <li>
                    <a href="/pods/net">
                        <i class="linecons-doc" style="font-size: 16px"></i>
                        <span class="title">.Net项目</span>
                    </a>
                </li>
                <li>
                    <a href="/pods/python">
                        <i class="linecons-database" style="font-size: 16px"></i>
                        <span class="title">Python项目</span>
                    </a>
                </li>
                <li class="active">
                    <a href="/pods/php">
                        <i class="linecons-doc" style="font-size: 16px"></i>
                        <span class="title">PHP项目</span>
                    </a>
                </li>
                <li>
                    <a href="/pods/mysql">
                        <i class="linecons-params" style="font-size: 16px"></i>
                        <span class="title">数据库地址</span>
                    </a>
                </li>
            </ul>

        </div>

    </div>

    <div class="main-content">

        <!-- User Info, Notifications and Menu Bar -->
        <nav class="navbar user-info-navbar" role="navigation">

            <!-- Left links for user info navbar -->
            <ul class="user-info-menu left-links list-inline list-unstyled">
                <li class="hidden-sm hidden-xs">
                    <a href="#" data-toggle="sidebar">
                        <i class="fa-bars"></i>
                    </a>
                </li>
            </ul>
            <!-- Right links for user info navbar -->
            <ul class="user-info-menu right-links list-inline list-unstyled">

                <li class="search-form"><!-- You can add "always-visible" to show make the search input visible -->

                    <form>
                        <input style="display:none" type="text" name="s" class="form-control search-field"
                               placeholder="搜索"/>

                        <button type="button" class="btn btn-link">
                            <i class="linecons-user"></i>
                        </button>
                    </form>

                </li>

                <li class="dropdown user-profile">
                    <a href="#" data-toggle="dropdown">
        <span style="display: inherit">
        <span style="color: rgb(141,193,43)" id="self"></span>
        <i class="fa-angle-down"></i>
        </span>
                    </a>

                    <ul class="dropdown-menu user-profile-menu list-unstyled">
                        <li>
                            <a href="/users/info">
                                <i class="fa-user"></i>
                                个人信息
                            </a>
                        </li>
                        <li class="last">
                            <a href="/users/logout">
                                <i class="fa-lock"></i>
                                退出登录
                            </a>
                        </li>
                    </ul>
                </li>


            </ul>

        </nav>

        <div class="row">

            <div class="col-md-10">
                <div class="alert alert-info">
                    <!--<button type="button" class="close" data-dismiss="alert">-->
                    <!--<span aria-hidden="true">&times;</span>-->
                    <!--<span class="sr-only">Close</span>-->
                    <!--</button>-->

                    <strong style="font-size: 20px ">注意！</strong><br>
                    <span style="font-size: 15px">文件上传是仅能上传压缩文件包（zip格式），且文件大小不能超过80M</span>
                </div>
            </div>

        </div>
        <div class="breadcrumb-env">

            <ol class="breadcrumb bc-1">
                <li>
                    <a href="/pods/php"><i class="fa-home"></i>返回PHP项目</a>
                </li>
                <li class="active">

                    <strong>文件上传</strong>
                </li>
            </ol>

        </div>


        <div class="panel panel-default">

            <div class="panel-heading">
                <h3 class="panel-title">
                    文件上传
                    <small>File-Upload</small>
                </h3>

            </div>

            <div class="panel-body">

                <script type="text/javascript">
                    jQuery(document).ready(function ($) {
                        var i = 1,
                            $example_dropzone_filetable = $("#example-dropzone-filetable"),
                            example_dropzone = $("#advancedDropzone").dropzone({
                                url: '/projects/upload',
                                maxFilesize: 80,
                                paramName: "file",
                                acceptedFiles: ".zip",
                                // Events

                                addedfile: function (file) {
                                    if (i == 1) {
                                        $example_dropzone_filetable.find('tbody').html('');
                                    }
                                    //文件大小
                                    var size = parseInt(file.size / 1024, 10);
                                    size = size < 1024 ? (size + " KB") : (parseInt(size / 1024, 10) + " MB");

                                    var $el = $('<tr>\
        <td class="text-center">' + (i++) + '</td>\
        <td>' + file.name + '</td>\
        <td><div class="progress progress-striped"><div class="progress-bar progress-bar-warning"></div></div></td>\
        <td>' + size + '</td>\
        <td>上传中...</td>\
        </tr>');

                                    $example_dropzone_filetable.find('tbody').append($el);
                                    file.fileEntryTd = $el;
                                    file.progressBar = $el.find('.progress-bar');

                                },

                                uploadprogress: function (file, progress, bytesSent) {
                                    file.progressBar.width(progress + '%');
                                },

                                success: function (file) {
                                    file.fileEntryTd.find('td:last').html('<span class="text-success">上传成功</span>');
                                    file.progressBar.removeClass('progress-bar-warning').addClass('progress-bar-success');
                                },

                                error: function (file) {
                                    file.fileEntryTd.find('td:last').html('<span class="text-danger">file.msg</span>');
                                    file.progressBar.removeClass('progress-bar-warning').addClass('progress-bar-red');
                                }
                            });

                        $("#advancedDropzone").css({
                            minHeight: 200
                        });

                    });
                </script>

                <br/>
                <div class="row">
                    <div class="col-sm-3 text-center">

                        <div id="advancedDropzone" class="droppable-area">
                            点击上传文件
                        </div>

                    </div>
                    <div class="col-sm-9">

                        <table width="100%" class="table table-bordered table-striped" id="example-dropzone-filetable">
                            <thead>
                            <tr>
                                <th width="1%" class="text-center">#</th>
                                <th width="50%">文件名称</th>
                                <th width="20%">上传进度</th>
                                <th>文件大小</th>
                                <th>状态</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td colspan="5">上传状态</td>
                            </tr>
                            </tbody>
                        </table>

                    </div>
                </div>

            </div>

        </div>

    </div>

</div>


<!-- Imported styles on this page -->
<link rel="stylesheet" href="assets/js/dropzone/css/dropzone.css">

<!-- Bottom Scripts -->
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/TweenMax.min.js"></script>
<script src="assets/js/resizeable.js"></script>
<script src="assets/js/joinable.js"></script>
<script src="assets/js/xenon-api.js"></script>
<script src="assets/js/xenon-toggles.js"></script>


<!-- Imported scripts on this page -->
<script src="assets/js/dropzone/dropzone.min.js"></script>


<!-- JavaScripts initializations and stuff -->
<script src="assets/js/xenon-custom.js"></script>
<script>
    function getUserSession() {
        var value = "";
        $.ajax({
            url: "/users/session",
            method: 'GET',
            dataType: 'json',
            async: false,
            success: function (resp) {
                if (resp.code == 4) {
                    value = resp.extend;
                }
            }
        });
        return value;
    }

    $("#self").text(getUserSession().userName);
</script>
</body>
</html>